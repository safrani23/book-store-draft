<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link href="../../static/css/index.css" th:href="@{/css/index.css}" type="text/css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/8083/8083385.png">
    <title>Список заказов</title>
</head>
<header>
    <form th:method="GET" th:action="@{/index}">
        <input class="logo" type="submit" value="Book Store">
    </form>
    <nav>
        <form th:method="GET" th:action="@{/search}">
            <input class="navigation" type="submit" value="ПОИСК">
        </form>
        <form th:method="GET" th:action="@{/catalog}">
            <input class="navigation" type="submit" value="КАТАЛОГ">
        </form>
        <form th:method="GET" th:action="@{/basket}">
            <input class="navigation" type="submit" value="КОРЗИНА">
        </form>
        <form th:method="GET" th:action="@{/orders}">
            <input class="navigation selected" type="submit" value="ЗАКАЗЫ">
        </form>
        <form th:method="GET" th:action="@{/profile}">
            <input class="navigation" type="submit" value="ПРОФИЛЬ">
        </form>
        <form th:method="POST" th:action="@{/logout}">
            <input class="navigation" type="submit" value="ВЫХОД">
        </form>
    </nav>
</header>
<body>
<h1>Заказы</h1>
<hr>
<div th:each="order : ${orders}">
    <div>
        <h3 th:text="'Заказ № ' + ${order.getNumber()}"></h3>
        <p th:text="'Дата заказа: ' + ${#temporals.format(order.getDateTime(), 'dd-MMM-yyyy')}"></p>
        <p th:text="'Статус: ' + ${order.getStatus()}">
    <hr>
    </div>
    <hr>

</div>

<div th:each="header :${orders}">
    <h2 th:text="'Заказ № ' + ${header.getNumber()}" th:href="@{/admin/order/{id}(id=${header.getId()})}"></h2>
    <p th:text="'Дата заказа: ' + ${#temporals.format(header.getDateTime(), 'dd-MMM-yyyy')}"></p>
    <p th:text="'Пользователь: ' + ${header.getUser().getUsername()}"></p>
    <p th:text="'Email: ' + ${header.getUser().getEmail()}"></p>
    <p th:text="'Телефон: ' + ${header.getUser().getPhone_number()}"></p>
    <p th:text="'Статус: ' + ${header.getStatus().getTitle()}"></p>

    <hr><br>
</div>
<div th:each="details : ${orderDetails}">
    <div>
        <div th:each="img : ${details.getProduct().getImageList()}">
            <img th:src="'/img/' + ${img.getFileName()}" alt="product_img" class="product_img" height="200px">
        </div>
        <p th:text="${details.getProduct().getCategory().getName()}"></p>
        <h3 th:text="${details.getProduct().getTitle()}"></h3>
        <h4 th:text="${details.getProduct().getAuthor()}"></h4>
        <p th:text="${details.getProduct().getPublishing_house()}"></p>
        <p th:text="${details.getProduct().getYear_of_publishing()}"></p>
        <p th:text="${details.getCount()}"></p>
        <p th:text="${details.getPrice()}"></p>
        <hr>
    </div>
</div>
</body>
</html>